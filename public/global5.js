$(document).ready(function(){function t(e){return expiration_time=parseInt(e.toString().substring(0,e.toString().length-3)),expiration_time=moment.unix(expiration_time).toArray(),expiration_time=moment.utc(expiration_time),expiration_time=expiration_time.toString(),index=expiration_time.indexOf("+"),expiration_time=expiration_time.substr(0,index),expiration_time}function n(){return withdrawals=data.withdrawals,withdrawals_count=withdrawals.length,string='<div class="tab_description">Below is a list of withdrawals that you have made. Click the expander icon on the left of each row to reveal more details about the withdrawal. <br><br>To make a new withdrawal, please visit the Balances page and select the Withdraw option under the actions menu for the coin. <br><br>Displaying deposits 1 - '+withdrawals.length+" of "+withdrawals.length+'</div><table class="table table-bordered">        <thead>          <tr>            <th></th>            <th>TIME</th>            <th>COIN</th>            <th>AMOUNT</th>            <th>FEE</th>            <th>RECEIVING ADDRESS</th>            <th>STATUS</th>          </tr>        </thead><tbody>',$.each(withdrawals,function(e,t){var n;t.pending==0?n="SUCCESSFUL":n="UNCONFIRMED",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var r=moment.utc(array);r=r.toString(),index=r.indexOf("GM"),r=r.substr(0,index),withdrawal_time=r,t.txid==undefined&&(t.txid="Transaction is still unconfirmed. To confirm transaction, please check your email."),substring='<tr id="tab_row"> <td class="expander unclicked" id="'+t.txid+'"> </td><td class="tab_td">'+withdrawal_time+'</td>         <td class="tab_td">'+t.coin_ticker.toUpperCase()+'</td>        <td class="tab_td">'+t.amount+'</td>          <td class="tab_td">'+t.fee+'</td> <td class="tab_td">'+t.receiving_address+'</td> <td class="tab_td">'+n+"</td></tr>",string+=substring}),string+="</tbody></table>",string}function r(){return start_time=t(contract.start_time),end_time=t(contract.expiration_time),max_price_change=contract.max_price_change*100,string='<table class="table table-bordered contract_table"><tbody><tr class="contract_row">        <td class="td_contract_left">Full Symbol</td>        <td class="td_contract">'+contract.full_symbol+'</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Short Symbol</td>        <td class="td_contract">'+contract.short_symbol+'</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Type</td>        <td class="td_contract">Call option on the Bitcoin - US dollar exchange rate.</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Tick Size (R)</td>        <td class="td_contract">$.01</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Tick value (W)</td>        <td class="td_contract">$10</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Fees</td>        <td class="td_contract">No trading fees! Subject to change in future.</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Trading starts</td>        <td class="td_contract">'+start_time+'</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Settlement date</td>        <td class="td_contract">'+end_time+'</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Strike price</td>        <td class="td_contract">'+contract.strike_price+' USD</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Max price change during one trading session</td>        <td class="td_contract">Â±'+max_price_change+"%  relative to the close price of the last trading session. Subject to change."+'</td>        </tr>        <tr class="contract_row">        <td class="td_contract_left">Variation Margin</td>        <td class="td_contract">VM = -(PriceClose - PriceOpen) * W/R, where PriceClose and PriceOpen are calculated in BTC as 1/Price_in_USD</td>        </tr></tr></tbody></table>',string}function i(){return string='<h4>Change Password </h4><br> You can change your password using the form below. Only enter a new password if you wish to change it.<br><br><div style="max-width:500px"><table class="table table-bordered">        <tbody>          <tr>            <td class="col-md-3" style="background: #eee">Password</td>            <td><input style="width: 100%" id="change_pass" type="password"></td></tr>                      <tr>            <td style="background: #eee" > Confirm Password</td>            <td><input style="width: 100%" id="confirm_change_pass"  type="password"></td></tr>            </tbody></table><button type="button" class="btn btn-default" id="change_password">Change Password</button></div>',string}function s(){return $("#orders_li").attr("class","active"),orders=data.orders,order_count=orders.length,string='<div class="tab_description">Below is a list of orders that you have made. Any completed orders will show up under trade history. <br><br>Displaying currency trading orders 1 - '+orders.length+" of "+orders.length+'</div><table class="table table-bordered">        <thead>          <tr>            <th>ORDER ID</th>            <th>TYPE</th>            <th>MARKET</th>            <th>TIME</th>            <th>PRICE</th>            <th>AMOUNT</th>            <th>TOTAL</th>            <th>FEE</th>            <th>NET TOTAL</th>            <th></th>          </tr>        </thead><tbody>',$.each(orders,function(e,t){if(t.pending=="pending"&&t.swap==1){t.type=="ask"?type="SELL":type="BUY",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var n=moment.utc(array);n=n.toString(),index=n.indexOf("GM"),n=n.substr(0,index),order_time=n,substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+t.coin_two_ticker.toUpperCase()+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price+'</td>        <td class="tab_td_order">'+(t.quantity-t.quantity_left)+'</td>        <td class="tab_td_order">'+(t.quantity-t.quantity_left)*t.price+'</td>        <td class="tab_td_order">'+"0.00"+'</td>        <td class="tab_td_order">'+(t.quantity-t.quantity_left)*t.price+'</td>        <td class="tab_td_order">        <a class="cancel_alt_order" href="#" order_id="'+t._id+'">        <img src="'+prefix+'img/delete.png"   alt="Cancel"  class="2x" width="16" style="margin-left: 14px"><br>  Cancel </a>        </td></tr>',string+=substring}}),string+="</tbody></table><br><br>",string+="Displaying derivatives orders 1 - "+orders.length+" of "+orders.length+'<table class="table table-bordered">        <thead>          <tr>            <th>ORDER ID</th>            <th>CALL / PUT</th>            <th>TYPE</th>            <th>OPTION NAME</th>            <th>TIME</th>            <th>PRICE</th>            <th>AMOUNT</th>            <th>TOTAL</th>            <th>FEE</th>            <th>NET TOTAL</th>            <th></th>          </tr>        </thead><tbody>',$.each(orders,function(e,t){if(t.pending=="pending"&&t.swap==0){console.log(t),t.side=="ask"?type="SELL":type="BUY",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var n=moment.utc(array);n=n.toString(),index=n.indexOf("GM"),n=n.substr(0,index),order_time=n,console.log(t._id),console.log(t),substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+t.call_put+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+"BTC"+"/"+t.strike+"/<br>"+t.expiration_time+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price+'</td>        <td class="tab_td_order">'+t.quantity_left.toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.quantity_left*t.price).toPrecision(5)+'</td>        <td class="tab_td_order">0.0000000</td>        <td class="tab_td_order">'+(t.quantity_left*t.price).toPrecision(5)+'</td>        <td class="tab_td_order">        <a class="cancel_order" href="#" order_id="'+t._id+'">        <img src="'+prefix+'img/delete.png"  alt="Cancel" class="2x" width="16" style="margin-left: 14px"><br>  Cancel </a>        </td></tr>',string+=substring}}),string+="</tbody></table><br><br>",string}function o(){return orders=data.orders,console.log("AHA "+JSON.stringify(orders)),order_count=orders.length,length=0,$.each(orders,function(e,t){t.pending=="complete"?length++:t.pending=="pending"&&t.quantity!=t.quantity_left&&length++}),string="<div class=\"tab_description\">Below is a list of completed currency trading orders that you have made. Any pending orders will show up under 'Your Orders'. <br><br>Displaying orders 1 - "+length+" of "+length+'</div><table class="table table-bordered">        <thead>          <tr>            <th>ORDER ID</th>            <th>TYPE</th>            <th>MARKET</th>            <th>TIME</th>            <th>PRICE</th>            <th>AMOUNT</th>            <th>TOTAL</th>            <th>FEE</th>            <th>NET TOTAL</th>          </tr>        </thead><tbody>',$.each(orders,function(e,t){console.log(JSON.stringify(t));if(t.swap==1&&t.pending=="complete"){t.side=="ask"?type="SELL":type="BUY",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var n=moment.utc(array);n=n.toString(),index=n.indexOf("GM"),n=n.substr(0,index),order_time=n,substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+t.coin_two_ticker.toUpperCase()+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price+'</td>        <td class="tab_td_order">'+t.quantity+'</td>        <td class="tab_td_order">'+t.quantity*t.price+'</td>        <td class="tab_td_order">'+"0.00"+'</td>        <td class="tab_td_order">'+t.quantity*t.price+"</td></tr>",string+=substring}}),string+="</tbody></table>",string+="<br><br><br><div class=\"tab_description\">Below is a list of completed derivatives orders that you have made. Any pending orders will show up under 'Your Orders'. <br><br>Displaying orders 1 - "+length+" of "+length+'</div><table class="table table-bordered">        <thead>          <tr>            <th>ORDER ID</th>            <th>PUT / CALL</th>            <th>TYPE</th>            <th>OPTION NAME</th>            <th>TIME</th>            <th>PRICE</th>            <th>AMOUNT</th>            <th>TOTAL</th>            <th>FEE</th>            <th>NET TOTAL</th>            <th>STATUS</th>          </tr>        </thead><tbody>',$.each(orders,function(e,t){console.log(JSON.stringify(t));if(t.swap==0)if(t.pending=="complete"||t.pending=="pending"&&t.quantity!=t.quantity_left||t.pending=="exercised"||t.pending=="expired"||t.pending=="cancelled"&&t.quantity!=t.quantity_left){t.side=="ask"?type="SELL":type="BUY";var n;time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var r=moment.utc(array);r=r.toString(),index=r.indexOf("GM"),r=r.substr(0,index),order_time=r,processed=t.quantity-t.quantity_left,t.pending=="pending"||t.pending=="cancelled"?n="NOT EXERCISED YET":t.pending=="expired"?n="EXPIRED":n="EXERCISED",t.quantity==t.quantity_original&&t.swap==0?(substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+t.call_put+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+"BTC/"+t.call_put+"/<br>"+t.expiration_time+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price.toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.quantity-t.quantity_left).toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.price*(t.quantity-t.quantity_left)).toPrecision(5)+'</td>        <td class="tab_td_order">0.0000</td>        <td class="tab_td_order">'+(t.price*(t.quantity-t.quantity_left)).toPrecision(5)+'</td>        <td class="tab_td_order">'+n+"</td></tr>",string+=substring):(exercised_amount=t.quantity_original-t.quantity,unexercised_amount=parseFloat(t.quantity)-parseFloat(t.quantity_left),substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+t.call_put+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+"BTC/"+t.call_put+"/<br>"+t.expiration_time+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price.toPrecision(5)+'</td>        <td class="tab_td_order">'+t.quantity.toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.price*t.quantity).toPrecision(5)+'</td>        <td class="tab_td_order">0.0000</td>        <td class="tab_td_order">'+(t.price*t.quantity).toPrecision(5)+'</td>        <td class="tab_td_order">'+n+'</td>        <td class="tab_td_order">EXERCISED 1</td></tr><tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+t.call_put+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+"BTC/"+t.call_put+"/<br>"+t.expiration_time+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price.toPrecision(5)+'</td>        <td class="tab_td_order">'+t.quantity.toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.price*t.quantity).toPrecision(5)+'</td>        <td class="tab_td_order">0.0000</td>        <td class="tab_td_order">'+(t.price*t.quantity).toPrecision(5)+'</td>        <td class="tab_td_order">'+n+'</td>        <td class="tab_td_order">NOT EXERCISED YET 1 </td></tr>',string+=substring)}}),string+="</tbody></table>",string}function u(){return orders=data.orders,order_count=orders.length,length=0,$.each(orders,function(e,t){t.pending=="completed"?length++:t.pending=="pending"&&t.quantity!=t.quantity_left&&length++}),string='<div class="tab_description">Below is a list of options that you can exercise. Displaying options 1 - '+length+" of "+length+'</div><table class="table">        <thead>          <tr>            <th>ORDER ID</th>            <th>PUT / CALL</th>            <th>TYPE</th>            <th>OPTION NAME</th>            <th>TIME</th>            <th>PRICE</th>            <th>AMOUNT</th>            <th>TOTAL</th>            <th>FEE</th>            <th>NET TOTAL</th>            <th></th>          </tr>        </thead><tbody>',$.each(orders,function(e,t){console.log(JSON.stringify(t));if(t.swap==0&&t.side=="bid"&&(t.pending=="complete"||t.pending=="cancelled"&&t.quantity!=t.quantity_left||t.pending=="pending"&&t.quantity!=t.quantity_left)){t.side=="ask"?type="SELL":type="BUY",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var n=moment.utc(array);n=n.toString(),index=n.indexOf("GM"),n=n.substr(0,index),order_time=n,processed=t.quantity-t.quantity_left,substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+t.call_put+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+"BTC/"+t.call_put+"/<br>"+t.expiration_time+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price.toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.quantity-t.quantity_left).toPrecision(5)+'</td>        <td class="tab_td_order">'+(t.price*(t.quantity-t.quantity_left)).toPrecision(5)+'</td>        <td class="tab_td_order">0.0000</td>        <td class="tab_td_order">'+(t.price*(t.quantity-t.quantity_left)).toPrecision(5)+'</td>        <td class="tab_td_order"><a class="exercise_option" href="#" order_id="'+t._id+'">        <img src="'+prefix+'img/check.png" alt="Exercise" class="2x" width="16" style="margin-left: 20px"><br>  Exercise </a></td></tr>',string+=substring}}),string+="</tbody></table>",string}function a(e){return first_letter=e.substr(0,1).toUpperCase(),rest=e.substr(1),result=first_letter+rest,result}function f(){return deposits=data.deposits,deposit_count=deposits.length,string='<div class="tab_description">Below is a list of deposits that you have made. Click the expander icon on the left of each row to reveal more details about the deposit.<br><br>To make a new deposit, please visit the Balances page and select the Deposit option under the actions menu for the coin.<br><br>Displaying deposits 1 - '+deposits.length+" of "+deposits.length+'</div><table class="table table-bordered">        <thead>          <tr>            <th></th>            <th>TIME</th>            <th>COIN</th>            <th>AMOUNT</th>            <th>DEPOSIT ADDRESS</th>            <th>STATUS</th>          </tr>        </thead><tbody>',$.each(deposits,function(e,t){var n;t.pending==0?n="CONFIRMED":n="PENDING",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var r=moment.utc(array);r=r.toString(),index=r.indexOf("GM"),r=r.substr(0,index),deposit_time=r,substring='<tr id="tab_row">   <td class="expander unclicked" id="'+t.txid+'"> </td><td class="tab_td">'+deposit_time+'</td>           <td class="tab_td">'+t.coin_ticker.toUpperCase()+'</td>        <td class="tab_td">'+t.amount+'</td>           <td class="tab_td">'+t.deposit_address+'</td> <td class="tab_td">'+n+"</td>  </tr>",string+=substring}),string+="</tbody></table>",string}document.URL.indexOf("localhost")!=-1?prefix="http://localhost:8080/":prefix="http://genesisblock.io/",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($(".navbar-fixed-top").attr("class","navbar navbar-default navbar-static-top"),$("#top_area").css("margin-top","0px"),$(".navbar-static-top").css("margin-bottom","0px")),$.noty.defaults={layout:"bottomRight",theme:"defaultTheme",type:"success",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],timeout:1e4,callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1};var e=io.connect(prefix);e.on("deposit",function(e){deposit=e.deposit;if(deposit.pending){pending_deposits=$('[coin_name="'+deposit.coin_name+'"][fund_property="pending_deposits"]').html(),pending_deposits=parseFloat(pending_deposits),console.log("2 "+pending_deposits),pending_deposits+=deposit.amount,console.log("3 "+pending_deposits),$('[coin_name="'+deposit.coin_name+'"][fund_property="pending_deposits"]').html(pending_deposits.toFixed(5)),notification=deposit.amount+" "+a(deposit.coin_name)+"s pending deposit! - Awaiting confirmations";var t=noty({text:notification})}else pending_deposits=$('[coin_name="'+deposit.coin_name+'"][fund_property="pending_deposits"]').html(),pending_deposits=parseFloat(pending_deposits),console.log("2 "+pending_deposits),pending_deposits-=deposit.amount,console.log("3 "+pending_deposits),$('[coin_name="'+deposit.coin_name+'"][fund_property="pending_deposits"]').html(pending_deposits.toFixed(5)),previous_balance=parseFloat($('[coin_name="'+deposit.coin_name+'"][fund_property="balance"]').html()),previous_available_balance=parseFloat($('[coin_name="'+deposit.coin_name+'"][fund_property="available_balance"]').html()),current_balance=previous_balance+deposit.amount,current_available_balance=previous_available_balance+deposit.amount,$('[coin_name="'+deposit.coin_name+'"][fund_property="balance"]').html(current_balance.toFixed(5)),$('[coin_name="'+deposit.coin_name+'"][fund_property="available_balance"]').html(current_available_balance.toFixed(5)),notification=deposit.amount+" "+a(deposit.coin_name)+"s succesfully deposited!",noty({text:notification})}),(document.URL.indexOf("withdraw/confirm")!=-1||document.URL.indexOf("options")!=-1||document.URL.indexOf("altmarket")!=-1||document.URL.indexOf("optmarket")!=-1||document.URL.indexOf("contract")!=-1||document.URL.indexOf("contract")!=-1||document.URL.indexOf("faq")!=-1||document.URL.indexOf("trading")!=-1||document.URL.indexOf("trading")!=-1||document.URL.indexOf("voting")!=-1||document.URL.indexOf("fees")!=-1||document.URL.indexOf("about")!=-1||document.URL.indexOf("support")!=-1||document.URL==prefix)&&activated&&($("#right_bar").empty(),string='<li class="dropdown">          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Logged in as  '+user.full_name+'<b class="caret"></b></a>          <ul class="dropdown-menu">            <li><a href="'+prefix+'balances#taba1">Profile</a></li>            <li><a href="'+prefix+'balances#taba">Balances</a></li>            <li><a href="'+prefix+'balances#tabd">Deposits</a></li>            <li><a href="'+prefix+'balances#tabe">Withdrawals</a></li>            <li><a href="'+prefix+'balances#tabf">Orders</a></li>            <li><a href="'+prefix+'balances#tabg">Trade History</a></li>            <li><a href="'+prefix+'balances#tabh">Exercise Options</a></li>            <li><a class="logout_click">Logout</a></li>          </ul>        </li>',$("#right_bar").append(string)),document.URL==prefix&&(string='<div class="index_col col-md-6 col-lg-6 col-sm-6 col-xs-6"><div class="index_col_container"><h2 class="bottom_col">Live Trades </h2>    <table class="table table-bordered live_trades"  style="margin-bottom:50px">        <thead>          <tr>            <th>Time </th>            <th>Trade Pair</th>            <th>Amount</th>            <th>Price</th>          </tr>        </thead><tbody>',$.each(orderdata,function(e,n){time=t(n.time),substring='<tr id="tab_row" style="margin-bottom: 30px">        <td class="index_td">'+time+'</td>        <td class="index_td">'+n.coin_ticker_one.toUpperCase()+'/BTC</td>        <td class="index_td">'+n.quantity.toPrecision(5)+'</td>        <td class="index_td">'+n.price.toPrecision(5)+"</td></tr>",string+=substring}),string+='</tbody></table></div></div><div class="index_col_container"><div class="index_col col-md-6 col-lg-6 col-sm-6 col-xs-6"><h2 class="bottom_col">Live OrderBook </h2><div class="index_col col-md-6 col-lg-6 col-sm-6 col-xs-6">    <table class="table table-bordered live_trades"  style="margin-bottom:50px">        <thead >          <tr>            <th style="border-right: 1px solid #eee" >Most Recent Bids</th>            <th style="border-right: 1px solid #eee"></th>            <th></th>          </tr>        </thead><tbody>',$.each(bids,function(e,t){substring='<tr id="tab_row" style="margin-bottom: 30px">        <td class="index_td" >'+t.coin_one_ticker.toUpperCase()+'/BTC</td>        <td class="index_td" >'+t.quantity.toPrecision(5)+'</td>        <td class="index_td">'+t.price.toPrecision(5)+"</td></tr>",string+=substring}),string+='</tbody></table></div><div class="index_col col-md-6 col-lg-6 col-sm-6 col-xs-6">    <table class="table table-bordered live_trades"  style="margin-bottom:50px">        <thead >          <tr>            <th style="border-right: 1px solid #eee">Most Recent Asks</th>            <th style="border-right: 1px solid #eee"></th>            <th></th>          </tr>        </thead><tbody>',$.each(asks,function(e,t){substring='<tr id="tab_row" style="margin-bottom: 30px">        <td class="index_td" >'+t.coin_one_ticker.toUpperCase()+'/BTC</td>        <td class="index_td" >'+t.quantity.toPrecision(5)+'</td>        <td class="index_td">'+t.price.toPrecision(5)+"</td></tr>",string+=substring}),string+="</tbody></table></div></div>",middle_area='<div class="index_col col-md-3 col-lg-3 col-sm-3 col-xs-3"><img style="height:50px" class="index_icon" src="'+prefix+"/img/trade_icon.png"+'">  <h3 class="desc">Fast Trading </h3>  <h5 class="col-md-12 desc"> Trade in real-time and process orders in milliseconds.</h5>  </div>  <div class="index_col col-md-3 col-lg-3 col-sm-3 col-xs-3"><img style="height:80px; margin-top: 12px" class="index_icon"  src="'+prefix+"/img/low_fees.png"+'">  <h3 class="desc" style="margin-top: 10px">No fees </h3>  <h5 class="col-md-12 desc"> We are currently not taking any trading fees! </h5>  </div>  <div class="index_col col-md-3 col-lg-3 col-sm-3 col-xs-3"><img style="height:60px; margin-top: 25px" class="index_icon" src="'+prefix+"/img/lock_icon.png"+'">  <h3 class="desc">Security </h3>  <h5 class="col-md-12 desc"> GenesisBlock has been built with bitcoin security principles in mind. We also use cold storage.</h5>  </div>  <div class="index_col col-md-3 col-lg-3 col-sm-3 col-xs-3"><img style="height:50px; margin-top:39px" class="index_icon" src="'+prefix+"/img/support_icon.png"+'">  <h3 class="desc">Great Support</h3>  <h5 class="col-md-12 desc"> We handle support queries throughout the day, get help when you need it.</h5>  </div>',$("#middle_area").append(middle_area),$("#bottom_area").append(string)),document.URL.indexOf("options")!=-1&&(string=generate_options_table(!1),$("#trading_table").append(string),add_options_table_handlers(),$("a.options_page_href").on("click",function(){ticker=$(this).attr("ticker"),window.open(prefix+"optmarket/"+ticker,"_blank")}),$.ajax({url:"/append_options",type:"POST",data:"",dataType:"html"}).done(function(e){console.log(JSON.stringify(e)),e=$.parseJSON(e),console.log(JSON.stringify(e)),console.log(e.coins),activated=e.activated,user=e.user,coin_data=e.coin_data,coins=e.coins,string2=generate_options_table(!0),$("#trading_table").append(string2),add_options_table_handlers(),$("a.options_page_href2").on("click",function(){ticker=$(this).attr("ticker"),window.open(prefix+"optmarket/"+ticker,"_blank")})})),document.URL.indexOf("coin_trading")!=-1&&(string=generate_trading_table(),$("#trading_table").append(string),$("a.contract_page_href").on("click",function(){ticker=$(this).attr("ticker"),window.open(prefix+"altmarket/"+ticker+"/btc","_blank")})),document.URL.indexOf("trading")!=-1&&document.URL.indexOf("coin_trading")==-1&&(string=generate_options_table(),$("#options_table").append(string),$("a.contract_page_href").on("click",function(){short_symbol=$(this).attr("short_symbol"),window.open(prefix+"market/"+short_symbol,"_blank")}),$(".select_expiration").change(function(){val=$(this).val(),$(".select_expiration").val(val),$("html, body").animate({scrollTop:$("[group="+val+"]").offset().top-170},1e3)})),document.URL.indexOf("contract")!=-1&&($("#contract_header").append(contract.full_symbol),string=r(),$("#contract_table").append(string)),$("#register_button").click(function(){name=$("#name").val(),email=$("#email").val(),password=$("#password").val(),confirm_password=$("#confirm_password").val(),$("#terms_checkbox").is(":checked")==0?alert("Please make sure you read our terms of service, and check box"):name.length==0||email.length==0||password.length==0||confirm_password.length==0?alert("Please make sure you filled out all values in the form"):$.trim(password)!=$.trim(confirm_password)?alert("Please make sure you confirmed the right password"):$.ajax({url:"/register",type:"POST",data:{full_name:name,email:email,password:password,confirm_password:confirm_password},dataType:"html"}).done(function(e){e=="1"?alert("Account registered, but not activated yet. Please search for activation email in your inbox / spam folder"):e=="2"?alert("Account already registered"):alert("Your activation link has been sent to: "+email)})}),$("#login_button").click(function(){email=$("#email").val(),password=$("#password").val(),email.length==0||password.length==0?alert("Please make sure you filled out all values in the form"):$.ajax({url:"/login",type:"POST",data:{email:email,password:password},dataType:"html"}).done(function(e){e=="correct"?(localStorage.setItem("email",email),window.location=prefix):alert(e)})}),$("#forgot_button").click(function(){email=$("#email").val(),email.length==0?alert("Please make sure you filled out your email address!"):$.ajax({url:"/forgot",type:"POST",data:{email:email},dataType:"html"}).done(function(e){e=="incorrect"?alert("Account with email address does not exist"):e=="unactivated"?alert("User has not been activated yet. Please check email for activation link"):alert("Email reminder sent")})}),$(".logout_click").click(function(){$.ajax({url:"/logout",type:"POST",data:"",dataType:"html"}).done(function(e){window.location=prefix})}),$("#copy").click(function(){deposit_address=$("#deposit_address").html(),alert(deposit_address)}),document.URL.indexOf("org")!=-1?root=window.location.host:root="http://localhost:8080";var e=io.connect(root);e.on("fuck",function(e){}),e.on("news",function(e){}),document.URL.indexOf("withdraw")!=-1&&document.URL.indexOf("withdrawal")==-1&&(coin_info=data,code=coin_info.code,balance=coin_info.balance,code_upper=code.toUpperCase(),withdraw_fee=coin_info.withdraw_fee,coin_name=coin_info.coin_name,string='<div class="tab_header">Withdraw '+code_upper+'</div><div class="tab_description"><div class="box"><span><span id="deposit_address">Once submitted, all requests MUST be confirmed via email. Please only contact support if you have not received the confirmation email.</span></span></div></div><div id="withdraw_available_balance">Your current available '+code_upper+" balance: "+balance+'</div><div class="tab_header_modified" >Amount to Withdraw</div><div id="error_message"></div><input type="number" name="amount" id="withdraw_amount" value="0" required="required" class="error"></input> '+code_upper+'<div class="tab_header_modified">Withdraw fee</div><div class="tab_description">'+withdraw_fee+" "+code_upper+'</div><div class="tab_header_modified">Net Withdraw amount</div><div class="tab_description" id="net_withdraw_amount">0.000000 '+code_upper+'</div><div class="tab_header_modified" >'+code_upper+' Withdrawal Address</div><input type="text" id="withdrawal_address" style="width: 300px" required="required" class="error"></input><div class="tab_header_modified" >Confirm Password</div><input type="password" name="amount" id="withdraw_password" required="required" class="error"></input><div class="tab_description">Please ensure all details are correct before submitting. Every request must be confirmed by email before it will be processed, most withdrawals are processed within 10 minutes of email confirmation. For security reasons, larger withdrawals can take longer as they may require manual verification. </div><button type="button" class="btn btn-primary" id="withdraw_button" style="margin-top: 30px; margin-bottom: 100px">Withdraw</button>',$("#below_tab_wrapper").append(string)),document.URL.indexOf("deposit")!=-1&&($("#deposits_li").attr("class","active"),deposits=data,deposit_count=deposits.length,string='<div class="tab_header">Coin Deposits</div><div class="tab_description">Below is a list of deposits that you have made. Click the expander icon on the left of each row to reveal more details about the deposit.<br><br>To make a new deposit, please visit the Balances page and select the Deposit option under the actions menu for the coin.<br><br>Displaying deposits 1 - '+deposits.length+" of "+deposits.length+'</div><table class="table" id="tab_table"><tbody id="balance_tbody"><tr class="active"> <td></td>  <td class="active">TIME</td>   <td class="active">COIN</td>  <td class="active">AMOUNT</td>     <td class="active">DEPOSIT ADDRESS</td> <td class="active">STATUS</td></tr>',$.each(deposits,function(e,t){ticker_upper=t.coin_ticker.toUpperCase();var n;t.pending==0?n="CONFIRMED":n="PENDING",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var r=moment.utc(array);r=r.toString(),index=r.indexOf("GM"),r=r.substr(0,index),deposit_time=r,substring='<tr id="tab_row"> <td class="expander unclicked" id="'+t.txid+'"> </td><td class="tab_td">'+deposit_time+'</td>         <td class="tab_td">'+ticker_upper+'</td>        <td class="tab_td">'+t.amount+'</td>         <td class="tab_td">'+t.deposit_address+'</td> <td class="tab_td">'+n+"</td></tr>",string+=substring}),string+="</tbody></table>",$("#below_tab_wrapper").append(string),$(".expander").click(function(){class_name=$(this).attr("class"),class_name=="expander unclicked"?($(this).attr("class","expander clicked"),id=$(this).attr("id"),string='<tr class="active"> <td colspan="6" class="left_td"><span class="inner_td">Transaction Id: '+
id+"</span></td></tr>",$(this).parent().after(string)):($(this).attr("class","expander unclicked"),$(this).parent().next().remove())})),document.URL.indexOf("withdrawal")!=-1&&($("#withdrawals_li").attr("class","active"),withdrawals=data,withdrawals_count=withdrawals.length,string='<div class="tab_header">Coin Withdrawals</div><div class="tab_description">Below is a list of withdrawals that you have made. Click the expander icon on the left of each row to reveal more details about the withdrawal. <br><br>To make a new withdrawal, please visit the Balances page and select the Withdraw option under the actions menu for the coin. <br><br>Displaying deposits 1 - '+withdrawals.length+" of "+withdrawals.length+'</div><table class="table" id="tab_table"><tbody id="balance_tbody"><tr class="active"> <td></td>  <td class="active">TIME</td>   <td class="active">COIN</td>  <td class="active">AMOUNT</td>     <td class="active">FEE</td>    <td class="active">RECEIVING ADDRESS </td> <td class="active">STATUS</td></tr>',$.each(withdrawals,function(e,t){}),$.each(withdrawals,function(e,t){t.coin_ticker!=undefined?ticker_upper=t.coin_ticker.toUpperCase():ticker_upper="DOGE";var n;t.pending==0?n="SUCCESSFUL":n="UNCONFIRMED",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var r=moment.utc(array);r=r.toString(),index=r.indexOf("GM"),r=r.substr(0,index),withdrawal_time=r,t.txid==undefined&&(t.txid="Transaction is still unconfirmed. To confirm transaction, please check your email."),substring='<tr id="tab_row"> <td class="expander unclicked" id="'+t.txid+'"> </td><td class="tab_td">'+withdrawal_time+'</td>         <td class="tab_td">'+ticker_upper+'</td>        <td class="tab_td">'+t.amount+'</td>          <td class="tab_td">'+t.fee+'</td> <td class="tab_td">'+t.receiving_address+'</td> <td class="tab_td">'+n+"</td></tr>",string+=substring}),string+="</tbody></table>",$("#below_tab_wrapper").append(string),$(".expander").click(function(){class_name=$(this).attr("class"),class_name=="expander unclicked"?($(this).attr("class","expander clicked"),id=$(this).attr("id"),string='<tr class="active"> <td class="left_td"><span class="inner_td">Transaction Id: '+id+"</span></td></tr>",$(this).parent().after(string)):($(this).attr("class","expander unclicked"),$(this).parent().next().remove())})),document.URL.indexOf("orders")!=-1&&($("#orders_li").attr("class","active"),orders=data,order_count=orders.length,string='<div class="tab_header">Open Orders</div><div class="tab_description">Below is a list of orders that you have made. Any completed orders will show up under trade history. <br><br>Displaying orders 1 - '+orders.length+" of "+orders.length+'</div><table class="table" id="tab_table"><tbody id="balance_tbody"><tr class="active"> <td span="1">ORDER ID</td>   <td span="1">TYPE</td>  <td span="1">MARKET</td>     <td span="1">TIME</td>    <td class="col-md-1">PRICE</td> <td class="col-md-1">AMOUNT</td>     <td class="col-md-1">TOTAL</td><td class="col-md-1">FEE</td><td class="col-md-1">NET TOTAL</td class="col-md-1"><td class="col-md-1"> </td></tr>',$.each(orders,function(e,t){t.side=="ask"?type="SELL":type="BUY",time=parseInt(t.time.toString().substring(0,t.time.toString().length-3)),array=moment.unix(time).toArray();var n=moment.utc(array);n=n.toString(),index=n.indexOf("GM"),n=n.substr(0,index),order_time=n,substring='<tr id="tab_row">        <td class="tab_td_order">'+t._id+'</td>        <td class="tab_td_order">'+type+'</td>        <td class="tab_td_order">'+t.coin_one_ticker.toUpperCase()+"/"+t.coin_two_ticker.toUpperCase()+'</td>        <td class="tab_td_order">'+order_time+'</td>        <td class="tab_td_order">'+t.price+'</td>        <td class="tab_td_order">'+t.quantity+'</td>        <td class="tab_td_order">'+t.quantity*t.price+'</td>        <td class="tab_td_order">'+".015"+'</td>        <td class="tab_td_order">'+t.quantity*t.price*.015+'</td>        <td class="tab_td_order">        <a class="cancel_order" href="#" order_id="'+t._id+'">        <img src="https://www.GenesisBlock.com/assets/images/icons/delete.png"  alt="Cancel" class="2x" width="16"><br>  Cancel </a>        </td></tr>',string+=substring}),string+="</tbody></table>",$("#below_tab_wrapper").append(string),add_cancel_order_handler()),document.URL.indexOf("options")!=-1&&$.each(expiration_array,function(e,n){expiration_group=e+1,expiration_time=t(n),sub='<option value="'+expiration_group+'">'+expiration_time+"</option>",selection+=sub}),document.URL.indexOf("altmarket")!=-1&&(coin_one_ticker_upper=coin_one_ticker.toUpperCase(),coin_two_ticker_upper=coin_two_ticker.toUpperCase(),coin_one_name_modified=coin_one_name.substr(0,1).toUpperCase()+coin_one_name.substr(1,coin_one_name.length),coin_two_name_modified=coin_two_name.substr(0,1).toUpperCase()+coin_two_name.substr(1,coin_two_name.length),coin_one_ticker_modified=coin_one_ticker.substr(0,1).toUpperCase()+coin_one_ticker.substr(1,coin_one_ticker.length),coin_two_ticker_modified=coin_two_ticker.substr(0,1).toUpperCase()+coin_two_ticker.substr(1,coin_two_ticker.length),last_price=last_price.toPrecision(9),low_price=low_price.toPrecision(9),high_price=high_price.toPrecision(9),volume=volume.toPrecision(9),coin_one_balance=coin_one_balance.toPrecision(9),coin_two_balance=coin_two_balance.toPrecision(9),min_order=1,order_fee=0,pending_asks==null&&(pending_asks=new Array,obj=new Object,obj.price=0,obj.quantity_left=0,pending_asks.push(obj)),pending_bids==null&&(pending_bids=new Array,obj=new Object,obj.price=0,obj.quantity_left=0,pending_bids.push(obj)),string='<div id="top_header">    <div id="left_header">    <div id="trade_pair_header">'+coin_one_ticker_upper+"/"+coin_two_ticker_upper+"</div>"+coin_one_name_modified+"/"+coin_two_name_modified+'</div>    <div id="right_header">    <div class="stat">    <span class="title">LAST PRICE</span>    <br>    <strong>    <span id="span_last_price" class="">'+last_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR HIGH</span>    <br>    <strong>    <span id="span_24_high" class="">'+high_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR LOW</span>    <br>    <strong>    <span id="span_24_low" class="">'+low_price+'</span>    </strong>    </div>    <div class="stat unbordered">    <span class="title">24 HR VOLUME</span>    <br>    <strong>    <span id="span_24_low" class="">'+volume+" "+coin_two_ticker_upper+'</span>    </strong>    </div>    </div>    </div>    <div style="clear:right;"></div>    <div id="chartdiv" style="width:85%; height:600px; margin-top: 60px"></div>    <div id="buy_sell">    <div id="col1">    <h3>Buy '+coin_one_ticker_modified+'</h3>    <div id="error_message"></div>',activated&&(string+='<div class="success box">Your '+coin_two_ticker_upper+' balance is <strong><a href="asdf" id="coin_two_balance" class="exchange_balance">'+coin_two_balance+"</a></strong>.</div>"),string+='<div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="bid_quantity" name="amount" value="0.00000000" class="required"> '+coin_one_ticker_upper+'<br>                <span class="label_style">Price Per '+coin_one_ticker_upper+':</span> <input type="number" id="bid_price" name="price" value="'+pending_asks[0].price.toPrecision(9)+'" class="required"> '+coin_two_ticker_upper+'<br>                <span class="label_style">Total:</span> <span class="total" id="buy_total">'+pending_asks[0].price.toPrecision(9)+'</span> <br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="buy_fee">0.00000000</span> BTC ('+(10*order_fee).toPrecision(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalBuy" >'+pending_asks[0].price.toPrecision(9)+"</span> "+coin_two_ticker_upper+'           <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_asks[0].price.toPrecision(9)+'" class="required">    </div>    <button type="button" class="btn btn-primary" id="buy_order">Submit Buy Order</button>    <h3>Sell Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table">    <tbody>    <tr>                  <th>PRICE ('+coin_two_ticker_upper+")</th>                  <th>"+coin_one_ticker_upper+"</th>                  <th>"+coin_two_ticker_upper+"</th>                </tr>",$.each(pending_asks,function(e,t){substring='<tr price="0.00000103">    <td >'+t.price.toPrecision(9)+"</td>    <td >"+t.quantity_left.toPrecision(9)+"</td>    <td >"+(t.price*t.quantity_left).toPrecision(9)+"</td></tr>",string+=substring}),string+='</tbody>    </table>    </div>    </div>    <div id="col2">    <h3>Sell '+coin_one_ticker_modified+'</h3>            <div id="error_message_sell"></div>',activated&&(string+='<div class="fail box">Your '+coin_one_ticker_upper+' balance is <strong><a id="coin_one_balance" href="asdf" class="exchange_balance">'+coin_one_balance+"</a></strong>.</div>"),string+='<div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="ask_quantity" name="amount" value="0.00000000" class="required"> '+coin_one_ticker_upper+'<br>                <span class="label_style">Price Per '+coin_one_ticker_upper+':</span> <input type="number" id="ask_price" name="price" value="'+pending_bids[0].price.toPrecision(9)+'" class="required"> '+coin_two_ticker_upper+'<br>                <span class="label_style">Total:</span> <span class="total" id="buy_total">'+pending_bids[0].price.toPrecision(9)+'</span> <br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="buy_fee">0.00000000</span> BTC ('+(10*order_fee).toPrecision(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalSell" >'+pending_bids[0].price.toPrecision(9)+"</span> "+coin_two_ticker_upper+'           <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_bids[0].price.toPrecision(9)+'" class="required">              </div>    <button type="button" class="btn btn-primary" id="ask_submit">Submit Sell Order</button>    <h3>Buy Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table">    <tbody>    <tr>                  <th>PRICE ('+coin_two_ticker_upper+")</th>                  <th>"+coin_one_ticker_upper+"</th>                  <th>"+coin_two_ticker_upper+"</th>                </tr>",$.each(pending_bids,function(e,t){substring='<tr price="0.00000103">    <td >'+t.price.toPrecision(9)+"</td>    <td >"+t.quantity_left.toPrecision(9)+"</td>    <td >"+(t.price*t.quantity_left).toPrecision(9)+"</td></tr>",string+=substring}),string+="</tbody>    </table>    </div>    </div>    </div>",$(".inner_content").append(string),add_price_handlers(),add_order_handlers()),document.URL.indexOf("optmarket")!=-1&&document.URL.indexOf("altmarket")==-1&&(coin_one_ticker_upper=coin_one_ticker.toUpperCase(),coin_two_ticker_upper=coin_two_ticker.toUpperCase(),coin_one_name_modified=coin_one_name.substr(0,1).toUpperCase()+coin_one_name.substr(1,coin_one_name.length),coin_two_name_modified=coin_two_name.substr(0,1).toUpperCase()+coin_two_name.substr(1,coin_two_name.length),coin_one_ticker_modified=coin_one_ticker.substr(0,1).toUpperCase()+coin_one_ticker.substr(1,coin_one_ticker.length),coin_two_ticker_modified=coin_two_ticker.substr(0,1).toUpperCase()+coin_two_ticker.substr(1,coin_two_ticker.length),last_price=last_price.toPrecision(9),low_price=low_price.toPrecision(9),high_price=high_price.toPrecision(9),volume=volume.toPrecision(9),strike=strike.toFixed(9),coin_one_balance=coin_one_balance.toPrecision(9),coin_two_balance=coin_two_balance.toPrecision(9),kind=="CALL"?(right="buy",inverse_right="sell",ticker_flagged=coin_one_ticker_upper,amount_flagged=coin_one_balance):(right="sell",inverse_right="buy",ticker_flagged=coin_two_ticker_upper,amount_flagged=coin_two_balance),min_order=1,order_fee=0,pending_asks==null&&(pending_asks=new Array,obj=new Object,obj.price=0,obj.quantity_left=0,pending_asks.push(obj)),pending_bids==null&&(pending_bids=new Array,obj=new Object,obj.price=0,obj.quantity_left=0,pending_bids.push(obj)),string='<div id="top_header">    <div id="left_header" style= "margin-bottom: 10px">    <div id="trade_pair_header">'+coin_one_ticker_upper+"/"+coin_two_ticker_upper+"/"+kind+"/<br>"+strike+"</div>"+coin_one_name_modified+"/"+coin_two_name_modified+" "+kind+" option"+" with strike price of "+strike+"<br> and expiration on "+t(expiration)+'</div>    <div id="right_header">    <div class="stat">    <span class="title">LAST PRICE</span>    <br>    <strong>    <span id="span_last_price" class="">'+last_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR HIGH</span>    <br>    <strong>    <span id="span_24_high" class="">'+high_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR LOW</span>    <br>    <strong>    <span id="span_24_low" class="">'+low_price+'</span>    </strong>    </div>    <div class="stat unbordered">    <span class="title">24 HR VOLUME</span>    <br>    <strong>    <span id="span_24_low" class="">'+volume+" "+coin_two_ticker_upper+'</span>    </strong>    </div>    </div>    </div>    <div style="clear:right;"></div>    <div id="chartdiv" style="width:85%; height:600px; margin-top: 60px"></div>    <div id="buy_sell">    <div id="col1">    <h3>Buy Option </h3>    <div id="error_message"></div>',activated&&(string+='<div class="success box">Your '+coin_two_ticker_upper+' balance is <strong><a href="asdf" id="coin_two_balance" class="exchange_balance">'+coin_two_balance+"</a></strong>.</div>"),string+='<div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="bid_quantity" name="amount" value="0.00000000" class="required"> options*<br>                <span class="label_style">Price Per option:</span> <input type="number" id="bid_price" name="price" value="'+pending_asks[0].price.toPrecision(9)+'" class="required"> '+coin_two_ticker_upper+'<br>                <span class="label_style">Total:</span> <span class="total" id="buy_total">'+pending_asks[0].price.toPrecision(9)+'</span> <br>                <span class="label_style">Margin Requirement:</span> <span class="margin" id="margin">0.00000000</span> <br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="buy_fee">0.00000000</span> BTC ('+(10*order_fee).toPrecision(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalBuy" >'+pending_asks[0].price.toPrecision(9)+"</span> "+coin_two_ticker_upper+'           <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_asks[0].price.toPrecision(9)+'" class="required">    </div>     <div style="height: 50px"> *Right to '+right+" specified amount of "+coin_one_name_modified+"s for "+strike+' BTC each before expiration</div><button type="button" class="btn btn-primary" id="buy_order">Submit Buy Order</button>    <h3>Sell Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table">    <tbody>    <tr>                  <th>PRICE ('+coin_two_ticker_upper+")</th>                  <th>"+coin_one_ticker_upper+"</th>                  <th>"+coin_two_ticker_upper+"</th>                </tr>",$.each(pending_asks,function(e,t){substring='<tr price="0.00000103">    <td >'+t.price.toPrecision(9)+"</td>    <td >"+t.quantity_left.toPrecision(9)+"</td>    <td >"+(t.price*t.quantity_left).toPrecision(9)+"</td></tr>",string+=substring}),string+='</tbody>    </table>    </div>    </div>    <div id="col2">    <h3>Sell Option</h3>            <div id="error_message_sell"></div>',activated&&(string+='<div class="fail box">Your '+ticker_flagged+' balance is <strong><a href="asdf"  id="coin_one_balance" class="exchange_balance">'+amount_flagged+"</a></strong>.</div>"),string+='<div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="ask_quantity" name="amount" value="0.00000000" class="required"> options*<br>                <span class="label_style">Price Per option:</span> <input type="number" id="ask_price" name="price" value="'+pending_bids[0].price.toPrecision(9)+'" class="required"> '+coin_two_ticker_upper+'<br>                <span class="label_style">Total:</span> <span class="total" id="sell_total">'+pending_bids[0].price.toPrecision(9)+'</span> <br>                <span class="label_style">Margin Requirement:</span> <span class="margin_requirement" id="margin_requirement">0.00000000</span>  '+ticker_flagged+'<br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="buy_fee">0.00000000</span> BTC ('+(10*order_fee).toPrecision(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalSell" >'+pending_bids[0].price.toPrecision(9)+"</span> "+coin_two_ticker_upper+'           <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_bids[0].price.toPrecision(9)+'" class="required">              </div>    <div style="height: 50px"> *You may be forced to '+inverse_right+" specified amount of "+coin_one_name_modified+"s for "+strike+' BTC each before expiration</div>    <button type="button" class="btn btn-primary" id="ask_submit">Submit Sell Order</button>    <h3>Buy Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table">    <tbody>    <tr>                  <th>PRICE ('+coin_two_ticker_upper+")</th>                  <th>"+coin_one_ticker_upper+"</th>                  <th>"+coin_two_ticker_upper+"</th>                </tr>",$.each(pending_bids,function(e,t){substring='<tr price="0.00000103">    <td >'+t.price.toPrecision(9)+"</td>    <td >"+t.quantity_left.toPrecision(9)+"</td>    <td >"+(t.price*t.quantity_left).toPrecision(9)+"</td></tr>",string+=substring}),string+="</tbody>    </table>    </div>    </div>    </div>",$(".inner_content").append(string),add_options_price_handlers(),add_order_options_handlers()),document.URL.indexOf("market")!=-1&&document.URL.indexOf("altmarket")==-1&&document.URL.indexOf("optmarket")==-1&&($("#right_bar").empty(),string='<li class="dropdown">          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Logged in as  '+user.full_name+'<b class="caret"></b></a>          <ul class="dropdown-menu">            <li><a href="profile">Profile</a></li>            <li><a href="'+prefix+'balances#taba">Balances</a></li>            <li><a href="'+prefix+'balances#tabd">Deposits</a></li>            <li><a href="'+prefix+'balances#tabe">Withdrawals</a></li>            <li><a href="'+prefix+'balances#tabf">Orders</a></li>            <li><a href="'+prefix+'balances#tabg">Trade History</a></li>            <li><a href="logout">Logout</a></li>          </ul>        </li>',$("#right_bar").append(string),expiration_time=parseInt(contract.expiration_time.toString().substring(0,contract.expiration_time.toString().length-3)),expiration_time=moment.unix(expiration_time).toArray(),expiration_time=moment.utc(expiration_time),expiration_time=expiration_time.toString(),index=expiration_time.indexOf("+"),expiration_time=expiration_time.substr(0,index),last_price=last_price.toPrecision(9),low_price=low_price.toPrecision(9),high_price=high_price.toPrecision(9),volume=volume.toPrecision(9),min_order=1,order_fee=.015,pending_asks==null&&(pending_asks=new Array,obj=new Object,obj.price=5,obj.quantity_left=3,pending_asks.push(obj)),pending_bids==null&&(pending_bids=new Array,obj=new Object,obj.price=5,obj.quantity_left=3,pending_bids.push(obj)),console.log(pending_asks[0].price),string='<div id="top_header">    <div id="left_header">    <div id="trade_pair_header"><a class="contract_href">'+contract.short_symbol+"</a></div>"+contract.full_symbol+'<br> <a class="contract_info_href">Contract Info</a></div>    <div id="right_header">    <div class="stat">    <span class="title">LAST PRICE</span>    <br>    <strong>    <span id="span_last_price" class="">'+last_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR HIGH</span>    <br>    <strong>    <span id="span_24_high" class="">'+high_price+'</span>    </strong>    </div>    <div class="stat">    <span class="title">24 HR LOW</span>    <br>    <strong>    <span id="span_24_low" class="">'+low_price+'</span>    </strong>    </div>    <div class="stat unbordered">    <span class="title">24 HR VOLUME</span>    <br>    <strong>    <span id="span_24_low" class="">'+volume+' BTC</span>    </strong>    </div>    </div>    </div>    <div style="clear:right;"></div>    <div id="chartdiv" style="width:85%; height:600px; margin-top: 60px"></div>    <div id="buy_sell">    <div id="col1">    <h3>Buy '+contract.short_symbol+'</h3>        <div id="error_message"></div>    <div class="success box">Your available BTC balance is <strong><a href="asdf" class="exchange_balance">'+available_balance+'</a></strong>.</div>    <div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="bid_quantity" name="amount" value="'+(new Number(0)).toFixed(9)+'" class="required"> '+contract.short_symbol+'<br>                <span class="label_style">Price Per '+contract.short_symbol+':</span> <input type="number" id="bid_price" name="price" value="'+(pending_asks[0].price+1e-9).toFixed(9)+'" class="required"> BTC<br>                <span class="label_style">Current Bitcoin Price:</span> <span type="number" class="current_btc_price">'+"$"+last_bitstamp+'</span> <br>                <span class="label_style">Strike Price:</span> <span type="number" id="strike_price">'+"$"+contract.strike_price+'</span> <br>                <span class="label_style">Expiration time:</span> <span type="number" id="expiration">'+expiration_time+'</span> <br>                <span class="label_style">Margin Requirement:</span> <span type="number" class="margin" id="buy_margin">'+(new Number(0)).toFixed(9)+'</span> <br>                <span class="label_style">Total:</span> <span class="total" id="buy_total">'+pending_asks[0].price.toFixed(9)+'</span> <br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="buy_fee">0.00000000</span> BTC ('+0..toFixed(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalBuy" >'+pending_asks[0].price.toFixed(9)+'</span> BTC                          <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_asks[0].price.toFixed(9)+'" class="required">    </div>    <button type="button" class="btn btn-primary" id="buy_order">Submit Buy Order</button>    <h3>Sell Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table" style="width: 100% !important">    <tbody>    <tr>                  <th>PRICE (BTC)</th>                  <th>Quantity</th>                  <th>Total Cost in BTC</th>                </tr>',$.each(pending_asks,function(e,t){substring='<tr price="0.00000103">    <td >'+(t.price+1e-9).toFixed(9)+"</td>    <td >"+t.quantity_left.toFixed(9)+"</td>    <td >"+(t.price*t.quantity_left).toFixed(9)+"</td></tr>",string+=substring}),string+='</tbody>    </table>    </div>    </div>    <div id="col2">    <h3>Sell '+contract.short_symbol+'</h3>    <div id="error_message_sell"></div><div class="fail box">Your available BTC balance is <strong><a href="asdf" class="exchange_balance">'+available_balance+'</a></strong>.</div>    <div class="box options">                <span class="label_style">Amount:</span> <input type="number" id="ask_quantity" name="amount" value="0.00000000" class="required"> '+contract.short_symbol+'<br>                <span class="label_style">Price Per '+contract.short_symbol+':</span> <input type="number" id="ask_price" name="price" value="'+pending_bids[0].price.toFixed(9)+'" class="required"> BTC<br>                <span class="label_style">Current Bitcoin Price:</span> <span type="number" class="current_btc_price">'+"$"+last_bitstamp+'</span> <br>                <span class="label_style">Strike Price:</span> <span type="number" id="strike_price">'+"$"+contract.strike_price+'</span> <br>                <span class="label_style">Expiration time:</span> <span type="number" id="expiration">'+expiration_time+'</span> <br>                <span class="label_style">Margin Requirement:</span> <span type="number"  class="margin" id="sell_margin">'+(new Number(0)).toFixed(9)+'</span> <br>                <span class="label_style">Total:</span> <span class="total" id="sell_total">'+pending_bids[0].price.toFixed(9)+'</span> <br>                <span class="label_style">Trading Fee:</span> <span class="fee" id="sell_fee">0.00000000</span> BTC ('+0..toFixed(2)+'%)<br>                <span class="label_style">Net Total:</span> <span class="netTotalSell" >'+pending_bids[0].price.toFixed(9)+'</span> BTC                          <input type="hidden" name="buyNetTotal" id="buy_net_total" value="'+pending_bids[0].price.toFixed(9)+'" class="required">              </div>    <button type="button" class="btn btn-primary" id="ask_submit">Submit Sell Order</button>    <h3>Buy Orders </h3>    <div class="scroll_table">    <table class="table" id="sell_table" style="width: 100% !important">    <tbody>    <tr>                  <th>PRICE (BTC)</th>                  <th>Quantity</th>                  <th>Total Offer in BTC</th>                </tr>',$.each(pending_bids,function(e,t){substring='<tr price="0.00000103">    <td >'+t.price.toFixed(9)+"</td>    <td >"+t.quantity_left.toFixed(9)+"</td>    <td >"+(t.price*t.quantity_left).toFixed(9)+"</td></tr>",string+=substring}),string+="</tbody>    </table>    </div>    </div>    </div>",$(".inner_content").append(string),margin=.4,bitcoin_price=570,$("#bid_quantity").on("change",function(){bid_quantity=$("#bid_quantity").val(),bid_price=$("#bid_price").val(),current_price=$(".current_btc_price").html(),current_price=current_price.substr(1,current_price.length),current_price=parseFloat(current_price),buy_margin=margin*(bid_quantity*10/current_price),$("#buy_total").html((bid_quantity*bid_price).toFixed(9)),$("#buy_fee").html(0..toFixed(9)),$(".netTotalBuy").html((bid_quantity*bid_price*1).toFixed(9)),$("#buy_margin").html(buy_margin.toFixed(9)),withdraw_fee=.01,total=bid_quantity*bid_price,net_total=total*1.0015,net_total=total,net_total>available_balance?$("#error_message").html().length<3&&$("#error_message").append("Net total must be less than or equal to your available balance."):net_total+buy_margin>available_balance?$("#error_message").html().length<3&&$("#error_message").append("Net total + margin requirement must be less than or equal to your available balance."):$("#error_message").html().substr(0,3)=="Net"&&$("#error_message").empty()}),$("#bid_price").on("change",function(){bid_quantity=$("#bid_quantity").val(),bid_price=$("#bid_price").val(),buy_margin=$("#buy_margin").html(),buy_margin=buy_margin.substr(1,buy_margin.length),buy_margin=parseFloat(buy_margin),$("#buy_total").html((bid_quantity*bid_price).toFixed(9)),$("#buy_fee").html(0..toFixed(9)),$(".netTotalBuy").html((bid_quantity*bid_price*1).toFixed(9)),withdraw_fee=.01,total=bid_quantity*bid_price,net_total=total*1.0015,net_total=total,net_total>available_balance?$("#error_message").html().length<3&&$("#error_message").append("Net total must be less than or equal to your available balance."):net_total+buy_margin>available_balance?$("#error_message").html().length<3&&$("#error_message").append("Net total + margin requirement must be less than or equal to your available balance."):$("#error_message").html().substr(0,3)=="Net"&&$("#error_message").empty()}),$("#ask_quantity").on("change",function(){ask_quantity=$("#ask_quantity").val(),ask_price=$("#ask_price").val(),current_price=$(".current_btc_price").html(),current_price=current_price.substr(1,current_price.length),current_price=parseFloat(current_price),strike_price=contract.strike_price,current_price<strike_price?sell_margin=margin*(ask_quantity*10/current_price):(in_the_money=10/(current_price-strike_price)*ask_quantity,fourty_percent_change=.4*(ask_quantity*10/current_price),sell_margin=in_the_money+fourty_percent_change),$("#sell_total").html((ask_quantity*ask_price).toFixed(9)),$("#sell_fee").html(0..toFixed(9)),$(".netTotalSell").html((ask_quantity*ask_price*1).toFixed(9)),$("#sell_margin").html(sell_margin.toFixed(9)),withdraw_fee=.01,fees=ask_quantity*ask_price*.0015,fees=0,total=ask_quantity*ask_price,net_total=total*1.0015,net_total=total*1,sell_margin+fees>available_balance?$("#error_message_sell").html().length<3&&$("#error_message_sell").append("Margin requirement + trading fee must be less than or equal to your available balance."):$("#error_message_sell").html().substr(0,3)=="Mar"&&$("#error_message_sell").empty()}),$("#ask_price").on("change",function(){ask_quantity=$("#ask_quantity").val(),ask_price=$("#ask_price").val(),$("#sell_total").html((ask_quantity*ask_price).toFixed(9)),$("#sell_fee").html(0..toFixed(9)),$(".netTotalSell").html((ask_quantity*ask_price*1).toFixed(9)),sell_margin=$("#sell_margin").html(),sell_margin=sell_margin.substr(1,sell_margin.length),sell_margin=parseFloat(sell_margin),current_price=$(".current_btc_price").html(),current_price=current_price.substr(1,current_price.length),current_price=parseFloat(current_price),strike_price=contract.strike_price,current_price<strike_price?sell_margin=margin*(ask_quantity*10/current_price):(in_the_money=10/(current_price-strike_price)*ask_quantity,fourty_percent_change=.4*(ask_quantity*10/current_price),sell_margin=in_the_money+fourty_percent_change),withdraw_fee=.01,fees=ask_quantity*ask_price*.0015,fees=0,total=ask_quantity*ask_price,net_total=total*1.0015,net_total=total,sell_margin+fees>available_balance?$("#error_message_sell").html().length<3&&$("#error_message_sell").append("Margin requirement + trading fee must be less than or equal to your available balance."):$("#error_message_sell").html().substr(0,3)=="Mar"&&$("#error_message_sell").empty()}),$("#buy_order").click(function(){$("#error_message").html().length>3&&$("html, body").animate({scrollTop:0},"slow"),bid_quantity=$("#bid_quantity").val(),bid_price=$("#bid_price").val(),buy_margin=$("#buy_margin").html(),$.ajax({url:"/buy_order",type:"POST",data:{maintenance_margin:buy_margin,bid_quantity:bid_quantity,bid_price:bid_price,short_symbol:contract.short_symbol,_csrf:csrf},dataType:"html"}).done(function(e){alert("Order submitted!")})}),$("#ask_submit").click(function(){ask_quantity=$("#ask_quantity").val(),ask_price=$("#ask_price").val(),sell_margin=parseFloat($("#sell_margin").html()),$.ajax({url:"/ask",type:"POST",data:{maintenance_margin:sell_margin,ask_quantity:ask_quantity,ask_price:ask_price,short_symbol:contract.short_symbol,_csrf:csrf},dataType:"html"}).done(function(e){alert("Order submitted!")})}),$("a.contract_href").on("click",function(){window.open(prefix+"contract/"+contract.short_symbol,"_blank")}),$("a.contract_info_href").on("click",function(){window.open(prefix+"contract/"+contract.short_symbol,"_blank")}));if(document.URL.indexOf("balances")!=-1){$("#balances_li").attr("class","active"),array=new Array,array.push(data.bitcoin),array.push(data.dogecoin),array.push(data.litecoin),document.URL.indexOf("localhost")==-1&&(array.push(data.x11coin),array.push(data.darkcoin),array.push(data.ppcoin),array.push(data.vericoin),array.push(data.blackcoin),array.push(data.namecoin)),array.sort(function(e,t){return e.coin_number-t.coin_number}),a_string=" *Net in orders denotes how much your balance will go down by if all your orders are processed.<br><br>",$.each(array,function(e,t){a_string+='<div class="table-responsive"><table class="table table-bordered">        <thead>          <tr>            <th>CURRENCY</th>            <th>CODE</th>            <th>BALANCE</th>            <th>IN POSITIONS</th>            <th>IN ORDERS</th>            <th>NET IN ORDERS * </th>            <th>AVAILABLE</th>            <th>PENDING <br>DEPOSITS</th>            <th>PENDING <br>WITHDRAWALS</th>          </tr>        </thead>        <tbody>          <tr>            <td>'+a(t.coin_name)+"</td>            <td>"+t.code.toUpperCase()+'</td>            <td fund_property="balance" coin_name="'+t.coin_name+'">'+t.balance.toPrecision(6)+"</td>            <td>"+t.in_positions.toPrecision(6)+"</td>            <td>"+t.in_orders.toPrecision(6)+"</td>            <td>"+t.in_orders_non_margin.toPrecision(6)+'</td>            <td fund_property="available_balance"  coin_name="'+t.coin_name+'">'+t.available_balance.toPrecision(6)+'</td>            <td fund_property="pending_deposits"  coin_name="'+t.coin_name+'">'+
t.pending_deposits.toPrecision(6)+'</td>            <td fund_property="pending_withdrawals"  coin_name="'+t.coin_name+'">'+t.pending_withdrawals.toPrecision(6)+"</td>          </tr>        </tbody>      </table></div>"}),yolo='<table class="table" id="tab_table">  <tbody id="balance_tbody">  <tr class="active">  <td class="active">CURRENCY</td>  <td class="active">AMOUNT</td>  <td class="active">IN POSITIONS <br> (margin)</td>  <td class="active">IN ORDERS<br> (margin)</td>  <td class="active">IN ORDERS<br> (offer for options)</td>  <td class="active">REQUIRED<br>MARGIN</td>  <td class="active">AVAILABLE</td>  <td class="active">PENDING <br>DEPOSITS</td>  <td class="active">PENDING <br>WITHDRAWALS</td>  <td class="active"></td>  </tr><tr id="tab_row">        <td class="tab_td">BITCOIN</td>        <td class="tab_td">'+data.balance+'</td>        <td class="tab_td">'+data.in_positions+' </td>        <td class="tab_td">'+data.in_orders+' </td>        <td class="tab_td">'+data.in_orders_non_margin+' </td>        <td class="tab_td">'+data.maintenance_margin+' </td>        <td class="tab_td">'+data.available_balance+' </td>        <td class="tab_td">'+data.pending_deposits+' </td>        <td class="tab_td">'+data.pending_withdrawals+" </td>  </tr></tbody></table><br> *Denotes how much your balance will go down by if all your orders are processed.",b_string='Select coin to deposit to get deposit address: <br> <br><select id="select_deposit" class="form-control" style="width:100px">',$.each(array,function(e,t){b_string+='<option value="'+t.coin_name+'">'+a(t.coin_name)+"</option>"}),b_string+='</select><div id="address_info">To add bitcoins, send to this address: <span style="font-weight: bold">'+data.bitcoin.deposit_address+"</span></div>",c_string_ending='<div id="withdraw_info"> <div id="tab_content"><div class="tab_description"><div class="box"><span><span id="deposit_address">Once submitted, all requests MUST be confirmed via email. Please only contact support if you have not received the confirmation email.</span></span></div></div><div id="withdraw_available_balance">Your current available BTC balance: '+data.bitcoin.available_balance+'</div><div class="tab_header_modified" >Amount to Withdraw</div><div id="error_message"></div><input type="number" name="amount" id="withdraw_amount" value="0" required="required" class="error"></input> BTC <div class="tab_header_modified">Withdraw fee</div><div class="tab_description">'+data.bitcoin.withdraw_fee+'BTC </div><div class="tab_header_modified">Net Withdraw amount</div><div class="tab_description" id="net_withdraw_amount">0.000000  BTC</div><div class="tab_header_modified" >BTC Withdrawal Address</div><input type="text" id="withdrawal_address" style="width: 300px" required="required" class="error"></input><div class="tab_header_modified" >Confirm Password</div><input type="password" name="amount" id="withdraw_password" required="required" class="error"></input><div class="tab_description">Please ensure all details are correct before submitting. Every request must be confirmed by email before it will be processed, most withdrawals are processed within 10 minutes of email confirmation. For security reasons, larger withdrawals can take longer as they may require manual verification. </div><button type="button" class="btn btn-primary" id="withdraw_button" style="margin-top: 30px; margin-bottom: 100px">Withdraw</button></div></div>',c_string='Select coin to withdraw: <br> <br><select id="select_withdraw" class="form-control" style="width:100px">',$.each(array,function(e,t){c_string+='<option value="'+t.coin_name+'">'+a(t.coin_name)+"</option>"}),c_string+="</select>",c_string+=c_string_ending,d_string=f(),e_string=n(),f_string=s(),g_string=o(),h_string=u(),a1_string=i(),string='<ul class="nav nav-pills nav-stacked " id="nav_pills" style="margin-top: 30px">  <li class="" id="your_funds"><a href="#your_profile_tab" data-toggle="pill" class="top_href" >Your Profile</a></li>  <li class="" id="your_funds"><a href="#your_funds_tab" data-toggle="pill" class="top_href" >Your Funds</a></li>  <li class="" id="add_funds"><a href="#add_funds_tab" data-toggle="pill" class="top_href">Add Funds</a></li>  <li class="" id="withdraw_funds"><a href="#withdraw_funds_tab" data-toggle="tab" class="top_href">Withdraw Funds</a></li>  <li class="" id="your_deposits"><a href="#your_deposits_tab" data-toggle="tab" class="top_href">Your Deposits</a></li>  <li class="" id="your_withdrawals"><a href="#your_withdrawals_tab" data-toggle="tab" class="top_href">Your Withdrawals</a></li>  <li class="" id="your_orders"><a href="#your_orders_tab" data-toggle="tab" class="top_href">Your Orders</a></li>  <li class="" id="your_trades"><a href="#your_trade_history_tab" data-toggle="tab" class="top_href">Your Trade History</a></li>  <li class="" id="your_options"><a href="#your_exercise_options_tab" data-toggle="tab" class="top_href">Exercise Options</a></li></ul><div class="tab-content">        <div class="tab-pane tab_add" id="your_profile_tab">             <h3>Your Profile</h3><br>'+a1_string+'</div>        <div class="tab-pane tab_add" id="your_funds_tab">             <h3>Your Funds</h3><br>'+a_string+'</div>        <div class="tab-pane tab_add" id="add_funds_tab">             <h3>Add Funds</h3><br>'+b_string+'</div>        <div class="tab-pane tab_add" id="withdraw_funds_tab">             <h3>Withdraw Funds</h3>'+c_string+'</div>        <div class="tab-pane tab_add" id="your_deposits_tab">             <h3>Your Deposits</h3>'+d_string+'</div>        <div class="tab-pane tab_add" id="your_withdrawals_tab">             <h3>Your Withdrawals</h3>'+e_string+'</div>        <div class="tab-pane tab_add" id="your_orders_tab">             <h3>Your Orders</h3>'+f_string+'</div>        <div class="tab-pane tab_add" id="your_trade_history_tab">             <h3>Your Trade History</h3>'+g_string+'</div>        <div class="tab-pane tab_add" id="your_exercise_options_tab">             <h3>Exercise Options</h3>'+h_string+"</div></div>",$("#balances").prepend(string),l(),$("#right_bar").empty(),string='<li class="dropdown">          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Logged in as  '+data.full_name+'<b class="caret"></b></a>          <ul class="dropdown-menu">            <li><a   style="cursor:pointer;" id="profile_a">Profile</a></li>            <li><a   style="cursor:pointer;" id="balances_a">Balances</a></li>            <li><a   style="cursor:pointer;" id="deposits_a">Deposits</a></li>            <li><a  style="cursor:pointer;" id="withdrawals_a">Withdrawals</a></li>            <li><a  style="cursor:pointer;" id="orders_a">Orders</a></li>            <li><a  style="cursor:pointer;" id="trade_history_a">Trade History</a></li>            <li><a  style="cursor:pointer;" id="exercise_options_a">Exercise Options</a></li>            <li><a class="logout_click">Logout</a></li>          </ul>        </li>',$("#right_bar").append(string),$(".logout_click").click(function(){$.ajax({url:"/logout",type:"POST",data:"",dataType:"html"}).done(function(e){window.location=prefix})}),$("#balances_a").click(function(e){$("[href='#your_funds_tab']").click()}),$("#deposits_a").click(function(e){$("[href='#your_deposits_tab']").click()}),$("#withdrawals_a").click(function(e){$("[href='#your_withdrawals_tab']").click()}),$("#orders_a").click(function(e){$("[href='#your_orders_tab']").click()}),$("#trade_history_a").click(function(e){$("[href='#your_trade_history_tab']").click()}),$("#trade_history_a").click(function(e){$("[href='#your_trade_history_tab']").click()}),$("#exercise_options_a").click(function(e){$("[href='#your_exercise_options_tab']").click()}),$("#profile_a").click(function(e){$("[href='#your_profile_tab']").click()}),url=document.URL,ending=url.substr(url.indexOf("#")+1,url.length),ending=="taba1"||ending==prefix+"balances"?$("[href='#your_profile_tab']").click():ending=="taba"?$("[href='#your_funds_tab']").click():ending=="tabb"?$("[href='#add_funds_tab']").click():ending=="tabc"?$("[href='#withdraw_funds_tab']").click():ending=="tabd"?$("[href='#your_deposits_tab']").click():ending=="tabe"?$("[href='#your_withdrawals_tab']").click():ending=="tabf"?$("[href='#your_orders_tab']").click():ending=="tabg"?$("[href='#your_trade_history_tab']").click():ending=="tabh"?$("[href='#your_exercise_options_tab']").click():$("[href='#your_funds_tab']").click(),$("#select_deposit").change(function(){val=$(this).val(),$.ajax({url:"/select_deposit",type:"POST",data:{coin:val},dataType:"html"}).done(function(e){string="To add "+val+'s, send to this address: <span style="font-weight: bold">'+e+"</span>",$("#address_info").empty(),$("#address_info").append(string)})}),$("#select_withdraw").change(function(){val=$(this).val(),$.ajax({url:"/select_withdraw",type:"POST",data:{coin:val},dataType:"html"}).done(function(e){e=$.parseJSON(e),string='<div id="tab_content"><div class="tab_description"><div class="box"><span><span id="deposit_address">Once submitted, all requests MUST be confirmed via email. Please only contact support if you have not received the confirmation email.</span></span></div></div><div id="withdraw_available_balance">Your current available '+e.code.toUpperCase()+" balance: "+e.available_balance+'</div><div class="tab_header_modified" >Amount to Withdraw</div><div id="error_message"></div><input type="number" name="amount" id="withdraw_amount" value="0" required="required" class="error"></input> '+e.code.toUpperCase()+'<div class="tab_header_modified">Withdraw fee</div><div class="tab_description">'+e.withdraw_fee+" "+e.code.toUpperCase()+'</div><div class="tab_header_modified">Net Withdraw amount</div><div class="tab_description" id="net_withdraw_amount">0.000000  '+e.code.toUpperCase()+'</div><div class="tab_header_modified" >'+e.code.toUpperCase()+' Withdrawal Address</div><input type="text" id="withdrawal_address" style="width: 300px" required="required" class="error"></input><div class="tab_header_modified" >Confirm Password</div><input type="password" name="amount" id="withdraw_password" required="required" class="error"></input><div class="tab_description">Please ensure all details are correct before submitting. Every request must be confirmed by email before it will be processed, most withdrawals are processed within 10 minutes of email confirmation. For security reasons, larger withdrawals can take longer as they may require manual verification. </div><button type="button" class="btn btn-primary" id="withdraw_button" style="margin-top: 30px; margin-bottom: 100px">Withdraw</button></div>',$("#withdraw_info").empty(),$("#withdraw_info").append(string),l()})});function l(){$("#withdraw_amount").on("change",function(){console.log("yolo"),withdraw_amount=$("#withdraw_amount").val(),coin=$("#select_withdraw").val(),console.log(coin),withdraw_fee=data[coin].withdraw_fee,withdraw_amount>data[coin].available_balance?$("#error_message").html().length<3&&$("#error_message").append("Withdraw amount must be equal to or less than your available balance."):withdraw_amount-withdraw_fee<=0?($("#error_message").html().length<3&&$("#error_message").append("Your net withdraw amount is less than or equal to 0. Please enter a greater amount."),$("#error_message").html().substr(0,3)=="Wit"&&($("#error_message").empty(),$("#error_message").append("Your net withdraw amount is less than or equal to 0. Please enter a greater amount."))):($("#error_message").empty(),$("#net_withdraw_amount").html(withdraw_amount-withdraw_fee))}),$("#withdraw_button").click(function(){amount=$("#withdraw_amount").val(),address=$("#withdrawal_address").val(),password=$("#withdraw_password").val(),coin_name=$("#select_withdraw").val(),$("#error_message").html().length>3?$("html, body").animate({scrollTop:0},"slow"):(email=localStorage.getItem("email"),$.ajax({url:"/withdraw",type:"POST",data:{amount:amount,address:address,password:password,coin_name:coin_name},dataType:"html"}).done(function(e){e=="withdraw"?(string='<div class="box_green"><span><span id="deposit_address">          <span style="font-weight: bold">Success!</span><br>          Your withdrawal request has now been added, please confirm by email and we will then process it.</span></span></div>          </div>',$(".box").before(string),$("html, body").animate({scrollTop:0},"slow")):alert(e)}))})}$(".expander").click(function(){class_name=$(this).attr("class"),class_name=="expander unclicked"?($(this).attr("class","expander clicked"),id=$(this).attr("id"),string='<tr class="active">   <td colspan="10" class="left_td"><span class="inner_td">Transaction Id: '+id+"</span></td>  </tr>",$(this).parent().after(string)):($(this).attr("class","expander unclicked"),$(this).parent().next().remove())}),$(".deposit_dropdown").click(function(){var e=$(this).attr("id");e=e.substr(8,e.length),string='  <tr id="tab_row">\r\n  <td class="tab_td">dogecoin</td>\r\n  <td class="tab_td">doge</td>\r\n  <td class="tab_td">0.00000000</td>\r\n  <td class="tab_td">0.00000000</td>\r\n  <td class="tab_td">0.00000000</td>\r\n  <td class="tab_td">0.00000000</td>\r\n  <td class="tab_td">\r\n\r\n\r\n          <ul class="nav navbar-nav navbar-right">\r\n          <li class="dropdown">\r\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Actions <b class="caret"></b></a>\r\n\r\n      \r\n          <ul class="dropdown-menu">\r\n            <li><a href="#asdf" id="deposit_dropdown">Deposit</a></li>\r\n            <li><a href="">Withdraw</a></li>\r\n            <li><a href="#">View Deposits</a></li>\r\n            <li><a href="#">View Withdrawals</a></li>\r\n            <li><a href="#">View Orders</a></li>\r\n            <li><a href="#">View Trades</a></li>\r\n          </ul>\r\n        </li>  \r\n        </ul>\r\n\r\n  </td>\r\n\r\n  </tr>\r\n',$.ajax({url:"/get_address",type:"POST",data:{coin_name:e},dataType:"html"}).done(function(e){e=JSON.parse(e),string='<div class="tab_header">Deposit '+e.code+'</div><div class="tab_description">Your current available '+e.code+' balance: <span id="deposited_amount">'+e.balance+'</span></div><div class="tab_header">Your Deposit Address</div><div class="tab_description"><div class="box"> <span> <span id="deposit_address">'+e.deposit_address+'</span></span></div></div><div class="bottom_tab_description">You may also use previously generated deposit addresses. <br><br>Deposits are confirmed and will be available to use after <span style="font-weight: bold">'+e.confirmation+"</span> confirmations. Once our system has picked up the transaction it will show in the deposits listing as pending, this may take a few minutes from when the transaction has been broadcast to the network.</div>",$("#below_tab_wrapper").empty(),$("#below_tab_wrapper").append(string)})}),$(".withdraw_dropdown").click(function(){var e=$(this).attr("id");e=e.substr(9,e.length),test=prefix+"withdraw/"+e,window.location=test}),$(".cancel_order").click(function(){order_id=$(this).attr("order_id"),$.ajax({url:"/cancel_order",type:"POST",data:{order_id:order_id,_csrf:csrf},dataType:"html"}).done(function(e){$("a[order_id='"+order_id+"']").parent().parent().remove()})}),$(".exercise_option").click(function(){order_id=$(this).attr("order_id"),$.ajax({url:"/exercise_option",type:"POST",data:{order_id:order_id,_csrf:csrf},dataType:"html"}).done(function(e){e=="done"?$("a[order_id='"+order_id+"']").parent().parent().remove():alert("Not enough balance")})}),$("#change_password").click(function(){password=$("#change_pass").val(),confirm=$("#confirm_change_pass").val(),email=localStorage.getItem("email"),password!=confirm?alert("Please make sure that the passwords are the same!"):$.ajax({url:"/change_password",type:"POST",data:{email:email,password:password,_csrf:csrf},dataType:"html"}).done(function(e){alert("Password changed!")})}),add_cancel_alt_order_handler()}});